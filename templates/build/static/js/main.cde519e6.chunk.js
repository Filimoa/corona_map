(this["webpackJsonpkarta-update"]=this["webpackJsonpkarta-update"]||[]).push([[0],{126:function(e,t,a){},161:function(e,t,a){},221:function(e,t,a){},226:function(e,t,a){e.exports=a.p+"static/media/coronamap_logo.d01c8164.png"},276:function(e,t,a){e.exports=a(526)},281:function(e,t,a){},282:function(e,t,a){},326:function(e,t,a){},346:function(e,t,a){},525:function(e,t,a){},526:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(10),c=a.n(i),l=(a(281),a(16)),s=(a(282),a(79));a(161),a(110);function o(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)(!0),u=Object(l.a)(o,2),m=u[0],p=u[1],d=Object(n.useState)(!0),f=Object(l.a)(d,2),v=f[0],g=f[1],h={background:"#FF8184",borderColor:"#BE0005",color:"black"};return r.a.createElement("div",null,r.a.createElement("div",{className:"search-header"},r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("pct"),c(!1),p(!0),g(!0)},ghost:i,className:"button-first",style:h,shape:"round"},"Doubling Rate"),r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("cases"),c(!0),p(!1),g(!0)},ghost:m,className:"button",style:h,shape:"round"},"Total Infections"),r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("tests"),c(!0),p(!0),g(!1)},ghost:v,className:"button",style:h,shape:"round"},"Total Tests")))}var u=a(226),m=a.n(u);function p(e){return r.a.createElement("div",null,r.a.createElement("img",{src:m.a,className:"logo"}),r.a.createElement("div",{className:"search-header"},r.a.createElement(o,{setVal:e.setDisplayType})))}var d=a(155),f=a(528);function v(e){var t=new Date("2020-3-4");t.setDate(t.getDate()+e);var a=String(t.getDate()),n=String(t.getMonth()+1);return String(t.getFullYear())+"-"+n+"-"+a}a(326);function g(e){var t=Object(n.useState)(20),a=Object(l.a)(t,2),i=a[0],c=a[1],s=function(e,t){var a=new Date(e),n=new Date(t),r=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((i-r)/864e5)}("2020-03-4",function(){var e=new Date,t=String(e.getDate()),a=String(e.getMonth()+1);return String(e.getFullYear())+"-"+a+"-"+t}());return r.a.createElement("div",{className:"date-slider"},r.a.createElement("div",{className:"heading"},"Date"),r.a.createElement("div",{className:"slider"},r.a.createElement(f.a,{style:{sliderRailBackgroundColor:"black"},tipFormatter:function(e){var t=new Date(v(e-1));return t.toLocaleString("default",{month:"long"})+" "+String(t.getDate())},defaultValue:s,onChange:function(t){c(t),e.setDate(v(i))},max:s})))}var h=a(31),b=a(70),y={id:"state-layer",type:"fill",paint:{"fill-color":{property:"group",stops:[[0,"transparent"],[1," #f9a8a8"],[2,"#d78686"],[3,"#b66666"],[4,"#954647"],[5,"#74272a"]]},"fill-opacity":.5}},E={id:"point",type:"line",paint:{"line-color":{property:"group",stops:[[0,"transparent"],[1,"transparent"],[2,"black"]]},"line-width":3}},j=a(156),O={pct:{0:[1e3,30],1:[30,10],2:[10,5],3:[5,3],4:[3,1],5:[1,0]},cases:{0:[0,1],1:[1,10],2:[10,100],3:[100,1e3],4:[1e3,5e3],5:[5e3,1e5]},tests:{0:[0,1],1:[1,10],2:[10,100],3:[100,1e3],4:[1e3,5e3],5:[5e3,1e5]}};var w=a(152),D=a.n(w),x=a(232);function N(e){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a(345),a(346);var S=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)(null),o=Object(l.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(null),d=Object(l.a)(p,2),f=d[0],v=d[1],g=Object(n.useState)({latitude:39,longitude:-98,zoom:3.5}),w=Object(l.a)(g,2),D=w[0],x=w[1];return Object(n.useEffect)((function(){N("/get-state-geojson").then((function(e){return c(e)})),N("/get-state-quarantines").then((function(e){v(e)})),N("/get-quarantines-outlines").then((function(e){return m(e)}))}),[]),Object(n.useEffect)((function(){if(i){var t=e.displayType+"-"+e.date,a=Object.assign({},function(e,t,a){var n=O[a];function r(e){var t=-1;for(var a in n)if(e<Math.max.apply(Math,Object(j.a)(n[a]))&&e>=Math.min.apply(Math,Object(j.a)(n[a]))){t=parseInt(a);break}return t}return{type:"FeatureCollection",features:e.features.map((function(e){var a=t(e),n=Object(h.a)({},e.properties,{value:a,group:r(a)});return Object(h.a)({},e,{properties:n})}))}}(i,(function(e){return e.properties[t]}),e.displayType));c(a);var n=Object.assign({},function(e,t,a,n){var r=new Date(n);function i(e){var t=0;if(e in a){var n=a[e].date;n&&(n=new Date(n[0]))<=r&&(t=2)}return t}return{type:"FeatureCollection",features:e.features.map((function(e){var a=t(e),n=Object(h.a)({},e.properties,{value:a,group:i(a)});return Object(h.a)({},e,{properties:n})}))}}(u,(function(e){return e.properties.state}),f,e.date));m(n)}}),[e.date,e.displayType]),r.a.createElement("div",{className:"map-container"},r.a.createElement(b.c,Object.assign({width:"100vw",height:"85vh",mapStyle:"mapbox://styles/serjester/ck33r54pv2fab1crqyk8xuf89",mapboxApiAccessToken:"pk.eyJ1Ijoic2VyamVzdGVyIiwiYSI6ImNqeWV0ZWZsNTE0ejEzbHM4dnk5eWU2Z2cifQ.530rMydViqZBXBwPp6oLeQ",onViewportChange:function(e){x(Object(h.a)({},e))},onClick:function(t){var a;(a=t).features[0]&&e.onClick(a.features[0].properties)},interactiveLayerIds:["state-layer"]},D),r.a.createElement(b.b,{type:"geojson",data:i},r.a.createElement(b.a,y)),r.a.createElement(b.b,{type:"geojson",data:u},r.a.createElement(b.a,E))))};a(126);function k(e){var t={width:e.width,height:e.height,background:e.color};return r.a.createElement("div",{className:"menu-item"},r.a.createElement("div",{style:t},"\xa0"),r.a.createElement("div",{className:"menu-item-text"},e.text))}function C(e){return r.a.createElement("div",{className:"menu-item"},r.a.createElement("div",{className:"item-line-container"},r.a.createElement("div",{className:"item-line"},"\xa0")),r.a.createElement("div",{className:"menu-item-text"},"Shelter in place"))}var M={pct:{heading:"Doubling Time",items:{item1:{color:"#f9a8a8",text:"< 30 days"},item2:{color:"#d78686",text:"< 10 days"},item3:{color:"#b66666",text:"< 5 days"},item4:{color:"#954647",text:"< 3 days"},item5:{color:"#74272a",text:"< 1 days"}}},cases:{heading:"Total Cases",items:{item1:{color:"#f9a8a8",text:"< 10"},item2:{color:"#d78686",text:"< 100"},item3:{color:"#b66666",text:"< 1,000"},item4:{color:"#954647",text:"< 5,000"},item5:{color:"#74272a",text:"More than 5,000"}}},tests:{heading:"Total Tests",items:{item1:{color:"#f9a8a8",text:"< 10"},item2:{color:"#d78686",text:"< 100"},item3:{color:"#b66666",text:"< 1,000"},item4:{color:"#954647",text:"< 5,000"},item5:{color:"#74272a",text:"More than 5,000"}}}};function I(e){var t=M[e.displayType],a=Object.values(t.items).map((function(e){return r.a.createElement(k,{key:e.color,color:e.color,text:e.text,width:"20px",height:"20px"})}));return r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"heading"},t.heading),r.a.createElement("div",null,a),";",r.a.createElement("div",{className:"heading"},"Quarantine"),r.a.createElement(C,null))}var F=a(529),V=a(531),z=a(69);a(221);function L(e){var t=String(e.getDate()),a=String(e.getMonth()+1);return String(e.getFullYear())+"-"+a+"-"+t}var B={pct:"Doubling Rate",tests:"Tests Performed",cases:"Total Cases",deaths:"Fatalities"};function W(e){var t=function(e){function t(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}function a(e){return e.toLocaleString("default",{month:"short"})+" "+String(e.getDate())}var n=[];console.log(e);for(var r=new Date(e.date),i=-10;i<=0;i++){var c=t(r,i),l=e.displayType+"-"+L(c),s={name:a(c),val:e[l]};n.push(s)}return n}(Object(h.a)({},e),e.displayType),a=B[e.displayType];return t.forEach((function(e,a){999==e.val&&(t[a].val=null)})),r.a.createElement("div",null,r.a.createElement("div",{className:"graph-title"},a),r.a.createElement(z.b,{width:300,height:150,data:t},r.a.createElement(z.d,{dataKey:"name"}),r.a.createElement(z.e,null),r.a.createElement(z.c,null),r.a.createElement(z.a,{dataKey:"val",fill:"#ff8184"})))}function Y(e){var t=e["cases-"+e.date],a=e["tests-"+e.date],n=e["deaths-"+e.date],i=e["pct-"+e.date]+" days";var c=function(e){var t=new Date(e);return"On "+t.toLocaleString("default",{month:"long"})+" "+String(t.getDate())}(e.date);return r.a.createElement(F.a,{footer:null,visible:e.isOpen,onCancel:function(){return e.close(!1)},width:370,className:"resort-popup-mobile",bodyStyle:{padding:"0px"}},r.a.createElement("div",{className:"state-popup"},r.a.createElement("div",{className:"heading-popup"},e.state),r.a.createElement("div",{className:"stats"},r.a.createElement(V.a,{bordered:!0,size:"small",column:1,title:c},r.a.createElement(V.a.Item,{label:"Total Cases"},t),r.a.createElement(V.a.Item,{label:"Deaths"},n),r.a.createElement(V.a.Item,{label:"Total Tests"},a),r.a.createElement(V.a.Item,{label:"Case Doubling Rate"},i))),r.a.createElement("div",{className:"graph"},r.a.createElement(W,Object.assign({},e,{date:e.date})))))}a(525);function q(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)("2020-3-4"),o=Object(l.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(!1),d=Object(l.a)(p,2),f=d[0],v=d[1],h={position:"fixed",top:e.height-300,left:"30px",zindex:"5"};return r.a.createElement("div",{className:"map-container"},r.a.createElement(Y,Object.assign({isOpen:f,close:v,displayType:e.displayType,date:u},i)),r.a.createElement("div",{className:"map"},r.a.createElement(S,{onClick:function(e){c(e),v(!0)},displayType:e.displayType,isDesktop:e.isDesktop,date:u})),r.a.createElement("div",{className:"slider-container"},r.a.createElement(g,{setDate:m})),r.a.createElement("div",{style:h},r.a.createElement(I,{className:"map-legend",displayType:e.displayType})))}function R(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var U=function(){var e=Object(n.useState)("pct"),t=Object(l.a)(e,2),a=t[0],i=t[1],c=function(){var e=Object(n.useState)(R()),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(R())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}(),s=c.height,o=function(e){return e>600}(c.width);return d.a.initialize("UA-154707070-1"),d.a.pageview("/"),r.a.createElement("div",null,r.a.createElement("script",{src:"http://localhost:8097"}),r.a.createElement(p,{className:"main-header",setDisplayType:i}),r.a.createElement("div",{className:"main-content"},r.a.createElement(q,{height:s,isDesktop:o,displayType:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[276,1,2]]]);
//# sourceMappingURL=main.cde519e6.chunk.js.map