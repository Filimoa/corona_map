(this["webpackJsonpkarta-update"]=this["webpackJsonpkarta-update"]||[]).push([[0],{126:function(e,t,a){},162:function(e,t,a){},222:function(e,t,a){},227:function(e,t,a){e.exports=a.p+"static/media/coronamap_logo.d01c8164.png"},277:function(e,t,a){e.exports=a(527)},282:function(e,t,a){},283:function(e,t,a){},327:function(e,t,a){},347:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(10),i=a.n(c),l=(a(282),a(16)),s=(a(283),a(79));a(162),a(110);function o(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!0),u=Object(l.a)(o,2),m=u[0],p=u[1],d=Object(n.useState)(!0),g=Object(l.a)(d,2),f=g[0],v=g[1],h={background:"#FF8184",borderColor:"#BE0005",color:"black"};return r.a.createElement("div",null,r.a.createElement("div",{className:"search-header"},r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("pct"),i(!1),p(!0),v(!0)},ghost:c,className:"button-first",style:h,shape:"round"},"Doubling Rate"),r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("cases"),i(!0),p(!1),v(!0)},ghost:m,className:"button",style:h,shape:"round"},"Total Infections"),r.a.createElement(s.a,{type:"primary",onClick:function(){e.setVal("tests"),i(!0),p(!0),v(!1)},ghost:f,className:"button",style:h,shape:"round"},"Testing Ratio")))}var u=a(227),m=a.n(u);function p(e){return r.a.createElement("div",null,r.a.createElement("img",{src:m.a,className:"logo"}),r.a.createElement("div",{className:"search-header"},r.a.createElement(o,{setVal:e.setDisplayType})))}var d=a(155),g=a(529);function f(e){var t=new Date("2020/3/4");t.setDate(t.getDate()+e);var a=String(t.getDate()),n=String(t.getMonth()+1);return String(t.getFullYear())+"-"+n+"-"+a}function v(){var e=new Date,t=new Date(e);t.setDate(t.getDate()-1);var a=String(t.getDate()),n=String(t.getMonth()+1);return String(t.getFullYear())+"-"+n+"-"+a}a(327);function h(e){var t=Object(n.useState)(20),a=Object(l.a)(t,2),c=a[0],i=a[1],s=function(e,t){var a=new Date(e.replace(/-/g,"/")),n=new Date(t.replace(/-/g,"/")),r=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),c=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor((c-r)/864e5)+1}("2020-03-4",v());return r.a.createElement("div",{className:"date-slider"},r.a.createElement("div",{className:"heading"},"Date"),r.a.createElement("div",{className:"slider"},r.a.createElement(g.a,{style:{sliderRailBackgroundColor:"black"},tipFormatter:function(e){var t=new Date(f(e-1).replace(/-/g,"/"));return t.toLocaleString("default",{month:"long"})+" "+String(t.getDate())},defaultValue:s,onChange:function(t){i(t),e.setDate(f(c))},max:s})))}var b=a(31),y=a(70),E={id:"state-layer",type:"fill",paint:{"fill-color":{property:"group",stops:[[0,"transparent"],[1," #f9a8a8"],[2,"#d78686"],[3,"#b66666"],[4,"#954647"],[5,"#74272a"]]},"fill-opacity":.5}},O={id:"point",type:"line",paint:{"line-color":{property:"group",stops:[[0,"transparent"],[1,"transparent"],[2,"black"]]},"line-width":3}},j=a(156),w={pct:{0:[1e3,30],1:[30,10],2:[10,5],3:[5,3],4:[3,1],5:[1,0]},cases:{0:[0,1],1:[1,10],2:[10,100],3:[100,1e3],4:[1e3,5e3],5:[5e3,1e7]},tests:{0:[0,1],1:[1,5],2:[5,10],3:[10,15],4:[15,20],5:[20,1e7]}};var D=a(152),N=a.n(D),T=a(233);function S(e){return k.apply(this,arguments)}function k(){return(k=Object(T.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a(346),a(347);var x=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(null),o=Object(l.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(null),d=Object(l.a)(p,2),g=d[0],f=d[1],v=Object(n.useState)({latitude:39,longitude:-98,zoom:3.5}),h=Object(l.a)(v,2),D=h[0],N=h[1];return Object(n.useEffect)((function(){S("/get-state-geojson").then((function(e){return i(e)})),S("/get-state-quarantines").then((function(e){f(e)})),S("/get-quarantines-outlines").then((function(e){return m(e)}))}),[]),Object(n.useEffect)((function(){if(c){var t=e.displayType+"-"+e.date,a=Object.assign({},function(e,t,a){var n=w[a];function r(e){var t=-1;for(var a in n)if(e<Math.max.apply(Math,Object(j.a)(n[a]))&&e>=Math.min.apply(Math,Object(j.a)(n[a]))){t=parseInt(a);break}return t}return{type:"FeatureCollection",features:e.features.map((function(e){var a=t(e),n=Object(b.a)({},e.properties,{value:a,group:r(a)});return Object(b.a)({},e,{properties:n})}))}}(c,(function(e){return e.properties[t]}),e.displayType));i(a);var n=Object.assign({},function(e,t,a,n){var r=new Date(n.replace(/-/g,"/"));function c(e){var t=0;if(e in a){var n=a[e].date;n&&(n=new Date(n[0].replace(/-/g,"/")))<=r&&(t=2)}return t}return{type:"FeatureCollection",features:e.features.map((function(e){var a=t(e),n=Object(b.a)({},e.properties,{value:a,group:c(a)});return Object(b.a)({},e,{properties:n})}))}}(u,(function(e){return e.properties.state}),g,e.date));m(n)}}),[e.date,e.displayType]),r.a.createElement("div",{className:"map-container"},r.a.createElement(y.c,Object.assign({width:"100vw",height:"85vh",mapStyle:"mapbox://styles/serjester/ck33r54pv2fab1crqyk8xuf89",mapboxApiAccessToken:"pk.eyJ1Ijoic2VyamVzdGVyIiwiYSI6ImNqeWV0ZWZsNTE0ejEzbHM4dnk5eWU2Z2cifQ.530rMydViqZBXBwPp6oLeQ",onViewportChange:function(e){N(Object(b.a)({},e))},onClick:function(t){var a;(a=t).features[0]&&e.onClick(a.features[0].properties)},interactiveLayerIds:["state-layer"]},D),r.a.createElement(y.b,{type:"geojson",data:c},r.a.createElement(y.a,E)),r.a.createElement(y.b,{type:"geojson",data:u},r.a.createElement(y.a,O))))};a(126);function C(e){var t={width:e.width,height:e.height,background:e.color};return r.a.createElement("div",{className:"menu-item"},r.a.createElement("div",{style:t},"\xa0"),r.a.createElement("div",{className:"menu-item-text"},e.text))}function I(e){return r.a.createElement("div",{className:"menu-item"},r.a.createElement("div",{className:"item-line-container"},r.a.createElement("div",{className:"item-line"},"\xa0")),r.a.createElement("div",{className:"menu-item-text"},"Shelter in place"))}var M={pct:{heading:"Doubling Time",items:{item1:{color:"#f9a8a8",text:"< 30 days"},item2:{color:"#d78686",text:"< 10 days"},item3:{color:"#b66666",text:"< 5 days"},item4:{color:"#954647",text:"< 3 days"},item5:{color:"#74272a",text:"< 1 days"}}},cases:{heading:"Total Cases",items:{item1:{color:"#f9a8a8",text:"< 10"},item2:{color:"#d78686",text:"< 100"},item3:{color:"#b66666",text:"< 1,000"},item4:{color:"#954647",text:"< 5,000"},item5:{color:"#74272a",text:"More than 5,000"}}},tests:{heading:"Tests per case",items:{item1:{color:"#f9a8a8",text:"1 - 5"},item2:{color:"#d78686",text:"< 10"},item3:{color:"#b66666",text:"< 15"},item4:{color:"#954647",text:"< 20"},item5:{color:"#74272a",text:"More than 20"}}}},F=a(105);function V(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],i=a[1],s=M[e.displayType],o=Object.values(s.items).map((function(e){return r.a.createElement(C,{key:e.color,color:e.color,text:e.text,width:"20px",height:"20px"})})),u=r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"heading"},s.heading),r.a.createElement("div",null,o),r.a.createElement("div",{className:"heading"},"Quarantine"),r.a.createElement(I,null)),m=r.a.createElement("div",{className:"legend-closed"},r.a.createElement("div",{className:"heading"},"Legend"),r.a.createElement(F.a,{className:"IoIosArrowDown"}));return r.a.createElement("button",{className:"button-container",onClick:function(){return i(!c)}},c?u:m)}var L=a(530),z=a(532),B=a(69);a(222);function R(e){var t=String(e.getDate()),a=String(e.getMonth()+1);return String(e.getFullYear())+"-"+a+"-"+t}var W={pct:"Doubling Rate",tests:"Total Tests per case",cases:"Total Cases",deaths:"Fatalities"};function Y(e){var t=function(e){function t(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}function a(e){return e.toLocaleString("default",{month:"short"})+" "+String(e.getDate())}for(var n=[],r=new Date(e.date.replace(/-/g,"/")),c=-10;c<=0;c++){var i=t(r,c),l=e.displayType+"-"+R(i),s={name:a(i),val:e[l]};n.push(s)}return n}(Object(b.a)({},e),e.displayType),a=W[e.displayType];return t.forEach((function(e,a){999==e.val&&(t[a].val=null)})),r.a.createElement("div",null,r.a.createElement("div",{className:"graph-title"},a),r.a.createElement(B.b,{width:300,height:150,data:t},r.a.createElement(B.d,{dataKey:"name"}),r.a.createElement(B.e,{scale:"linear"}),r.a.createElement(B.c,null),r.a.createElement(B.a,{dataKey:"val",fill:"#ff8184"})))}function q(e){var t=function(e){return{cases:e["cases-"+e.date],tests:e["tests-"+e.date]+" ppl / case",deaths:e["deaths-"+e.date],doubling:e["pct-"+e.date]+" days",headingTitle:function(e){var t=new Date(e);return"On "+t.toLocaleString("default",{month:"long"})+" "+String(t.getDate())}(e.date.replace(/-/g,"/"))}}(e);return r.a.createElement(L.a,{footer:null,visible:e.isOpen,onCancel:function(){return e.close(!1)},width:370,className:"resort-popup-mobile",bodyStyle:{padding:"0px"}},r.a.createElement("div",{className:"state-popup"},r.a.createElement("div",{className:"heading-popup"},e.state),r.a.createElement("div",{className:"stats"},r.a.createElement(z.a,{bordered:!0,size:"small",column:1,title:t.headingTitle},r.a.createElement(z.a.Item,{label:"Total Cases"},t.cases),r.a.createElement(z.a.Item,{label:"Deaths"},t.deaths),r.a.createElement(z.a.Item,{label:"Testing Ratio"},t.tests),r.a.createElement(z.a.Item,{label:"Case Doubling Rate"},t.doubling))),r.a.createElement("div",{className:"graph"},r.a.createElement(Y,Object.assign({},e,{date:e.date})))))}function A(e){return r.a.createElement("button",{className:"button-container",onClick:function(){return e.onClick(!e.isOpen)}},r.a.createElement("div",{className:"legend-closed",style:{width:"140px"}},r.a.createElement("div",{className:"heading"},"US Overview"),r.a.createElement(F.b,{className:"IoIosArrowDown"})))}function U(e){return r.a.createElement("div",null,r.a.createElement(q,Object.assign({isOpen:e.isOpen,close:e.close,displayType:e.displayType,date:e.date},e)))}a(526);function Z(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(null),o=Object(l.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(v),d=Object(l.a)(p,2),g=d[0],f=d[1],b=Object(n.useState)(!1),y=Object(l.a)(b,2),E=y[0],O=y[1],j=Object(n.useState)(!1),w=Object(l.a)(j,2),D=w[0],N=w[1];return Object(n.useEffect)((function(){S("/get-usa-data").then((function(e){m(e)}))}),[]),r.a.createElement("div",{className:"map-container"},r.a.createElement(q,Object.assign({isOpen:E,close:O,displayType:e.displayType,date:g},c)),r.a.createElement(U,Object.assign({isOpen:D,close:N,displayType:e.displayType,date:g},u)),r.a.createElement("div",{className:"map"},r.a.createElement(x,{onClick:function(e){i(e),O(!0)},displayType:e.displayType,isDesktop:e.isDesktop,date:g})),r.a.createElement("div",{className:"slider-container"},r.a.createElement(h,{setDate:f})),r.a.createElement("div",{className:"us-overview-container"},r.a.createElement(A,{onClick:N,isOpen:D})),r.a.createElement("div",{className:"legend-container"},r.a.createElement(V,{displayType:e.displayType})))}function J(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Q=function(){var e=Object(n.useState)("pct"),t=Object(l.a)(e,2),a=t[0],c=t[1],i=function(){var e=Object(n.useState)(J()),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(J())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}(),s=i.height,o=function(e){return e>600}(i.width);return d.a.initialize("UA-154707070-1"),d.a.pageview("/"),r.a.createElement("div",null,r.a.createElement("script",{src:"http://localhost:8097"}),r.a.createElement(p,{className:"main-header",setDisplayType:c}),r.a.createElement("div",{className:"main-content"},r.a.createElement(Z,{height:s,isDesktop:o,displayType:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[277,1,2]]]);
//# sourceMappingURL=main.cc5ed99e.chunk.js.map